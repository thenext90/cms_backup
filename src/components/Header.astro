---
// Last updated: 2025-09-04 11:55 - Cleanup navbar: removed Efem√©rides, T√©cnicas de Calidad, Riesgos Psicosociales
import { Menu, ChevronDown, MessageCircle } from 'lucide-astro';
import DateTimeWidget from './DateTimeWidget.astro';
---

<header class="bg-white shadow-md sticky top-0 z-50" role="banner" aria-label="Encabezado CMS Consultores">
  <!-- Top bar with date/time - Solo visible en desktop -->
  <div class="hidden sm:block bg-gradient-to-r from-accent-800 to-accent-900 text-white py-1.5">
    <div class="max-w-container mx-auto px-4">
      <div class="flex items-center justify-between text-xs">
        <div class="flex items-center space-x-6">
          <span class="flex items-center space-x-1">
            <span>üìß</span>
            <span class="hidden md:inline">cmedina@cmsconsultores.cl</span>
          </span>
          <span class="flex items-center space-x-1">
            <span>üìû</span>
            <span class="hidden md:inline">+56 9 99462223</span>
            <span class="md:hidden">+56 9 994</span>
          </span>
          <span class="hidden md:flex items-center space-x-1">
            <span>üìç</span>
            <span>La Reina, Santiago, Chile</span>
          </span>
        </div>
        <div class="flex items-center space-x-2">
          <DateTimeWidget />
        </div>
      </div>
    </div>
  </div>
  
  <div class="max-w-container mx-auto px-4">
    <div class="flex items-center justify-between h-16 sm:h-20">
      <!-- Logo -->
      <div class="flex items-center">
        <a href="/" class="flex items-center">
          <img src="/images/log_2025.png" alt="CMS Consultores Logo" class="h-12 sm:h-16 w-auto"/>
        </a>
      </div>

      <!-- Desktop Navigation -->
  <nav class="hidden lg:flex items-center space-x-2" role="navigation" aria-label="Navegaci√≥n principal">
        <a href="/" class="text-sm px-2 py-1 text-gray-700 hover:text-accent-800 font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-gold" aria-label="Inicio">Inicio</a>
        
        <!-- Quienes Somos Dropdown -->
        <div class="relative group">
          <button class="flex items-center space-x-1 text-sm px-2 py-1 text-gray-700 hover:text-accent-800 font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-gold" aria-haspopup="true" aria-expanded="false" aria-label="Men√∫ Quienes Somos">
            <span>Quienes Somos</span>
            <ChevronDown size="16" />
          </button>
          <div class="absolute left-0 mt-2 w-64 bg-white rounded-md shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-10">
            <div class="py-2">
              <a href="/quienes-somos" class="block px-4 py-2 text-sm text-gray-700 hover:bg-red-50 hover:text-accent-800">Qui√©nes Somos</a>
              <a href="/organizacion" class="block px-4 py-2 text-sm text-gray-700 hover:bg-red-50 hover:text-accent-800">Organizaci√≥n</a>
              <a href="/curriculum" class="block px-4 py-2 text-sm text-gray-700 hover:bg-red-50 hover:text-accent-800">Curr√≠culum 1995-2006</a>
              <a href="/certificacion" class="block px-4 py-2 text-sm text-gray-700 hover:bg-red-50 hover:text-accent-800">Certificaci√≥n NCh 2728</a>
            </div>
          </div>
        </div>

        <!-- Servicios Dropdown -->
        <div class="relative group">
          <button class="flex items-center space-x-1 text-sm px-2 py-1 text-gray-700 hover:text-accent-800 font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-gold" aria-haspopup="true" aria-expanded="false" aria-label="Men√∫ Servicios">
            <span>Servicios</span>
            <ChevronDown size="16" />
          </button>
          <div class="absolute left-0 mt-2 w-72 bg-white rounded-md shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-10">
            <div class="py-2">
              <!-- Servicios de Consultor√≠a -->
              <div class="px-4 py-1">
                <h4 class="text-xs font-semibold text-gray-500 uppercase tracking-wide">Consultor√≠a</h4>
              </div>
              <a href="/capacitacion" class="block px-4 py-2 text-sm text-gray-700 hover:bg-red-50 hover:text-accent-800">Capacitaci√≥n</a>
              <a href="/condiciones-generales" class="block px-4 py-2 text-sm text-gray-700 hover:bg-red-50 hover:text-accent-800">Condiciones Generales del Servicio</a>
              <a href="/derechos-deberes" class="block px-4 py-2 text-sm text-gray-700 hover:bg-red-50 hover:text-accent-800">Derechos y Deberes de los Alumnos</a>
              
              <!-- Separador -->
              <div class="border-t border-gray-200 my-2"></div>
              
              <!-- Servicios Digitales -->
              <div class="px-4 py-1">
                <h4 class="text-xs font-semibold text-gray-500 uppercase tracking-wide">Servicios Digitales</h4>
              </div>
              <a href="http://www.cmsdoc.cl" target="_blank" class="block px-4 py-2 text-sm text-gray-700 hover:bg-red-50 hover:text-accent-800">CMSDOC</a>
              <a href="http://www.cmscloud.cl" target="_blank" class="block px-4 py-2 text-sm text-gray-700 hover:bg-red-50 hover:text-accent-800">CMSCloud</a>
              <a href="https://m2.cch.email/?_user=@cmsconsultores.cl" target="_blank" class="block px-4 py-2 text-sm text-gray-700 hover:bg-red-50 hover:text-accent-800">Correos CMS</a>
              <a href="https://intranet.cmsconsultores.cl/" target="_blank" class="block px-4 py-2 text-sm text-gray-700 hover:bg-red-50 hover:text-accent-800">Intranet</a>
            </div>
          </div>
        </div>

        <!-- Actualidad Dropdown -->
        <div class="relative group">
          <button class="flex items-center space-x-1 text-sm px-2 py-1 text-gray-700 hover:text-accent-800 font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-gold" aria-haspopup="true" aria-expanded="false" aria-label="Men√∫ Actualidad">
            <span>Actualidad</span>
            <ChevronDown size="16" />
          </button>
          <div class="absolute left-0 mt-2 w-64 bg-white rounded-md shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-10">
            <div class="py-2">
              <a href="/editorial" class="block px-4 py-2 text-sm text-gray-700 hover:bg-red-50 hover:text-accent-800">Editorial</a>
              <a href="/noticias-pyme" class="block px-4 py-2 text-sm text-gray-700 hover:bg-red-50 hover:text-accent-800">Noticias Pyme</a>
              <a href="/iso-noticias" class="block px-4 py-2 text-sm text-gray-700 hover:bg-red-50 hover:text-accent-800">Noticias ISO</a>
            </div>
          </div>
        </div>

        <a href="/contacto" class="text-sm px-2 py-1 text-gray-700 hover:text-accent-800 font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-gold" aria-label="Contacto">Contacto</a>
        
        <a href="https://certificate.cqs-cms.co.uk/" class="text-sm px-2 py-1 text-gray-700 hover:text-accent-800 font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-gold" aria-label="Certificados UK">Certificados UK</a>

        <!-- Norma ISO Dropdown -->
        <!-- Normas ISO Dropdown -->
        <div class="relative group">
          <button class="flex items-center space-x-1 text-sm px-2 py-1 text-gray-700 hover:text-accent-800 font-medium transition-colors">
            <span>Norma ISO</span>
            <ChevronDown size="16" />
          </button>
          <div class="absolute right-0 mt-2 w-56 bg-white rounded-md shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-10">
            <div class="py-2">
              <a href="/iso-9001" class="block px-4 py-2 text-sm text-gray-700 hover:bg-red-50 hover:text-accent-800">ISO 9001:2015</a>
              <a href="/info-iso-45001" class="block px-4 py-2 text-sm text-gray-700 hover:bg-red-50 hover:text-accent-800">ISO 45001:2018</a>
              <a href="/iso-14001" class="block px-4 py-2 text-sm text-gray-700 hover:bg-red-50 hover:text-accent-800">ISO 14001:2015</a>
              <a href="/iso-22000" class="block px-4 py-2 text-sm text-gray-700 hover:bg-red-50 hover:text-accent-800">ISO 22000:2018</a>
              <a href="/iso-27001-2013" class="block px-4 py-2 text-sm text-gray-700 hover:bg-red-50 hover:text-accent-800">ISO 27001:2013</a>
              <a href="/iso-27001-2022" class="block px-4 py-2 text-sm text-gray-700 hover:bg-red-50 hover:text-accent-800">ISO 27001:2022</a>
              <a href="/iso-27001-2024" class="block px-4 py-2 text-sm text-gray-700 hover:bg-red-50 hover:text-accent-800">ISO 27001:2024</a>
            </div>
          </div>
        </div>

        <!-- Futuras Normas Dropdown -->
        <div class="relative group">
          <button class="flex items-center space-x-1 text-sm px-2 py-1 text-gray-700 hover:text-accent-800 font-medium transition-colors">
            <span>Futuras Normas</span>
            <ChevronDown size="16" />
          </button>
          <div class="absolute right-0 mt-2 w-64 bg-white rounded-md shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-10">
            <div class="py-2">
              <div class="px-4 py-2 text-xs text-gray-500 font-semibold uppercase tracking-wide border-b border-gray-100">En Desarrollo</div>
              <a href="/iso-9001-2026" class="block px-4 py-2 text-sm text-gray-700 hover:bg-blue-50 hover:text-accent-800">
                <span class="flex items-center">
                  ISO 9001:2026
                  <span class="ml-2 px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full">Pr√≥ximo</span>
                </span>
              </a>
              <a href="/iso-14001-2026" class="block px-4 py-2 text-sm text-gray-700 hover:bg-green-50 hover:text-accent-800">
                <span class="flex items-center">
                  ISO 14001:2026
                  <span class="ml-2 px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full">2026</span>
                </span>
              </a>
              <a href="/iso-45001-2025" class="block px-4 py-2 text-sm text-gray-700 hover:bg-red-50 hover:text-accent-800">
                <span class="flex items-center">
                  ISO 45001:2025
                  <span class="ml-2 px-2 py-1 text-xs bg-red-100 text-red-800 rounded-full">Q4 2025</span>
                </span>
              </a>
              <a href="/futuras-normas" class="block px-4 py-2 text-sm text-gray-700 hover:bg-purple-50 hover:text-accent-800 border-t border-gray-100">
                <span class="flex items-center">
                  Ver Todas las Futuras Normas
                  <span class="ml-2 text-purple-600">‚Üí</span>
                </span>
              </a>
            </div>
          </div>
        </div>

      </nav>

      <!-- Mobile Menu Button -->
      <button class="lg:hidden p-2" id="mobile-menu-button">
        <Menu size="24" class="text-gray-700" />
      </button>
    </div>
  </div>

  <!-- Mobile Menu -->
  <div class="lg:hidden hidden bg-white border-t" id="mobile-menu">
    <div class="px-4 py-6 space-y-4">
      <a href="/" class="block text-gray-700 font-medium">Inicio</a>
      
      <div>
        <p class="font-medium text-gray-800 mb-2">Quienes Somos</p>
        <div class="pl-4 space-y-2">
          <a href="/quienes-somos" class="block text-sm text-gray-600">Qui√©nes Somos</a>
          <a href="/organizacion" class="block text-sm text-gray-600">Organizaci√≥n</a>
          <a href="/curriculum" class="block text-sm text-gray-600">Curr√≠culum 1995-2006</a>
          <a href="/certificacion" class="block text-sm text-gray-600">Certificaci√≥n NCh 2728</a>
        </div>
      </div>
      
      <div>
        <p class="font-medium text-gray-800 mb-2">Servicios</p>
        <div class="pl-4 space-y-2">
          <!-- Servicios de Consultor√≠a -->
          <p class="text-xs font-semibold text-gray-500 uppercase tracking-wide mt-2">Consultor√≠a</p>
          <a href="/capacitacion" class="block text-sm text-gray-600">Capacitaci√≥n</a>
          <a href="/condiciones-generales" class="block text-sm text-gray-600">Condiciones Generales</a>
          <a href="/derechos-deberes" class="block text-sm text-gray-600">Derechos y Deberes</a>
          
          <!-- Servicios Digitales -->
          <p class="text-xs font-semibold text-gray-500 uppercase tracking-wide mt-3">Servicios Digitales</p>
          <a href="http://www.cmsdoc.cl" target="_blank" class="block text-sm text-gray-600">CMSDOC</a>
          <a href="http://www.cmscloud.cl" target="_blank" class="block text-sm text-gray-600">CMSCloud</a>
          <a href="https://m2.cch.email/?_user=@cmsconsultores.cl" target="_blank" class="block text-sm text-gray-600">Correos CMS</a>
          <a href="https://intranet.cmsconsultores.cl/" target="_blank" class="block text-sm text-gray-600">Intranet</a>
        </div>
      </div>

      <div>
        <p class="font-medium text-gray-800 mb-2">Actualidad</p>
        <div class="pl-4 space-y-2">
          <a href="/editorial" class="block text-sm text-gray-600">Editorial</a>
          <a href="/noticias-pyme" class="block text-sm text-gray-600">Noticias Pyme</a>
          <a href="/iso-noticias" class="block text-sm text-gray-600">Noticias ISO</a>
        </div>
      </div>

      <a href="/contacto" class="block text-gray-700 font-medium">Contacto</a>
      <a href="https://cqs-cms.co.uk/" class="block text-gray-700 font-medium">Certificados UK</a>
      
      <div>
        <p class="font-medium text-gray-800 mb-2">Norma ISO</p>
        <div class="pl-4 space-y-2">
          <a href="/iso-9001" class="block text-sm text-gray-600">ISO 9001:2015</a>
          <a href="/info-iso-45001" class="block text-sm text-gray-600">ISO 45001:2018</a>
          <a href="/iso-14001" class="block text-sm text-gray-600">ISO 14001:2015</a>
          <a href="/iso-22000" class="block text-sm text-gray-600">ISO 22000:2018</a>
          <a href="/iso-27001-2013" class="block text-sm text-gray-600">ISO 27001:2013</a>
          <a href="/iso-27001-2022" class="block text-sm text-gray-600">ISO 27001:2022</a>
          <a href="/iso-27001-2024" class="block text-sm text-gray-600">ISO 27001:2024</a>
        </div>
      </div>

      <div>
        <p class="font-medium text-gray-800 mb-2">Futuras Normas</p>
        <div class="pl-4 space-y-2">
          <p class="text-xs font-semibold text-gray-500 uppercase tracking-wide">En Desarrollo</p>
          <a href="/iso-9001-2026" class="block text-sm text-gray-600 flex items-center">
            ISO 9001:2026
            <span class="ml-2 px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full">Pr√≥ximo</span>
          </a>
          <a href="/iso-14001-2026" class="block text-sm text-gray-600 flex items-center">
            ISO 14001:2026
            <span class="ml-2 px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full">2026</span>
          </a>
          <a href="/iso-45001-2025" class="block text-sm text-gray-600 flex items-center">
            ISO 45001:2025
            <span class="ml-2 px-2 py-1 text-xs bg-red-100 text-red-800 rounded-full">Q4 2025</span>
          </a>
          <a href="/futuras-normas" class="block text-sm text-gray-600 mt-2 pt-2 border-t border-gray-200">
            Ver Todas las Futuras Normas ‚Üí
          </a>
        </div>
      </div>
    </div>
  </div>
</header>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const mobileMenuButton = document.getElementById('mobile-menu-button');
    const mobileMenu = document.getElementById('mobile-menu');
    
    if (mobileMenuButton && mobileMenu) {
      mobileMenuButton.addEventListener('click', function() {
        mobileMenu.classList.toggle('hidden');
      });
    }
  });
</script>
